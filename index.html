<!DOCTYPE html>

<html>

<head>
    <title>Eliza - Chatbot</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="res/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <!-- container for the background picture -->
    <div class="page-bg"></div>

    <!-- header bar -->
    <header class="w3-bar w3-light-gray w3-opacity" style="width:100%">
        <h2 class="w3-bar-item w3-padding">Welcome to Eliza</h2>
        <!-- <a href="/about" class="w3-bar-item w3-right w3-border w3-button w3-margin w3-padding">About</a> -->
        <a href="/" class="w3-bar-item w3-border w3-button w3-margin w3-right w3-padding">New Session</a>
    </header>

    <!-- main container -->
    <div class="w3-container">
        <hr>
        <!-- ask for the users name on first visit -->
        <ul id="chatbox" class="w3-ul">
            {{if not .NameSet}}
            <li class="w3-bar w3-round-large" style="border: none;">
                <img src="res/female_avatar.png" class="w3-bar-item w3-circle" style="width:85px" />
                <div class="w3-bar-item">
                    <span class="w3-large">Eliza</span>
                    <br>
                    <span>Welcome! I am Eliza. Please tell me your name!</span>
                </div>
            </li>
            {{end}}

            <!-- this part is shown once a user has entered a name and a new 'session' starts -->
            {{if .NameSet}}
            <li class="w3-bar w3-round-large" style="border: none">
                <img src="res/female_avatar.png" class="w3-bar-item w3-circle" style="width:85px">
                <div class="w3-bar-item">
                    <span class="w3-large">Eliza</span>
                    <br>
                    <span>Welcome {{.Username}}! I am Eliza. {{.Greeting}}</span>
                </div>
            </li>
            {{end}}
        </ul>
        {{if .NameSet}}
        <!-- form with a textinput for user input and a button to submit the question -->
        <form class="w3-container" onSubmit="return false;" style="position: fixed; bottom: 50px; width: 100%">
            <div class="w3-bar">
                <input class="w3-input w3-border w3-bar-item" type="text" id="userTextInput" name="userTextInput" style="width: 90%; float:left; margin-top: 6px;"
                    placeholder="Please enter a question..." autofocus>
                <span class="w3-bar-item">
                    <button id="questionButton" class="w3-white">
                        <img src="res/right_arrow.png" alt="" style="width:45px" />
                    </button>
                </span>
            </div>
        </form>

        {{end}}
        <!-- form with an textinput for the user name and a button to submit -->
        {{if not .NameSet}}
        <form class="w3-container" action="/session" method="POST" style="position: fixed; bottom: 50px; width: 100%">
            <div class="w3-bar">
                <input class="w3-input w3-border w3-bar-item" type="text" id="userNameInput" name="userNameInput" style="width: 80%; float: left;"
                    placeholder="Please enter your name..." autofocus>
                <span class="w3-bar-item" style="padding-top: 1px;">
                    <button class="w3-button w3-gray w3-hover-black" id="nameButton" type="submit">Enter Name</button>
                </span>
            </div>
        </form>
        {{end}}
    </div>
    <!-- footer -->
    <footer class="w3-bar w3-light-gray w3-opacity" style="position: fixed; bottom: 0; width: 100%">
        <p class="w3-center">Bastian Graebener - G00340600 - Eliza Chatbot - Data Representation and Querying</p>
        <!-- <a href="/" class="w3-bar-item w3-border w3-button w3-margin w3-right w3-padding">New Session</a> -->
    </footer>

    <!-- script source -->
    <script type="text/javascript" src="res/script.js">
    </script>
</body>

</html>